# Angular å‰ç«¯åŸç†è¯¦è§£

> é€‚åˆåˆå­¦è€…çš„ Angular å‰ç«¯æ¶æ„å’Œå·¥ä½œåŸç†å®Œæ•´æŒ‡å—

---

## ğŸ“‹ ç›®å½•

1. [ä»€ä¹ˆæ˜¯å‰ç«¯ï¼Ÿ](#ä»€ä¹ˆæ˜¯å‰ç«¯)
2. [Angular æ¡†æ¶æ¦‚è¿°](#angular-æ¡†æ¶æ¦‚è¿°)
3. [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
4. [æ ¸å¿ƒæ¦‚å¿µè¯¦è§£](#æ ¸å¿ƒæ¦‚å¿µè¯¦è§£)
5. [æ•°æ®æµè½¬æœºåˆ¶](#æ•°æ®æµè½¬æœºåˆ¶)
6. [ä¸åç«¯é€šä¿¡](#ä¸åç«¯é€šä¿¡)
7. [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
8. [è·¯ç”±ç³»ç»Ÿ](#è·¯ç”±ç³»ç»Ÿ)
9. [ä¾èµ–æ³¨å…¥](#ä¾èµ–æ³¨å…¥)
10. [å®Œæ•´ç¤ºä¾‹æµç¨‹](#å®Œæ•´ç¤ºä¾‹æµç¨‹)

---

## ä»€ä¹ˆæ˜¯å‰ç«¯ï¼Ÿ

**å‰ç«¯ï¼ˆFrontendï¼‰** æ˜¯ç”¨æˆ·ç›´æ¥çœ‹åˆ°å’Œäº¤äº’çš„éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ï¼š
- **ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰**ï¼šæŒ‰é’®ã€è¡¨å•ã€è¡¨æ ¼ç­‰å¯è§†åŒ–å…ƒç´ 
- **ç”¨æˆ·äº¤äº’**ï¼šç‚¹å‡»ã€è¾“å…¥ã€æ»šåŠ¨ç­‰æ“ä½œ
- **æ•°æ®å±•ç¤º**ï¼šå°†åç«¯æ•°æ®ä»¥å‹å¥½çš„æ–¹å¼å‘ˆç°ç»™ç”¨æˆ·

**ç±»æ¯”ç†è§£**ï¼š
- å‰ç«¯ = é¤å…çš„èœå•å’Œç‚¹é¤ç•Œé¢
- åç«¯ = å¨æˆ¿ï¼ˆå¤„ç†è®¢å•ã€å‡†å¤‡é£Ÿç‰©ï¼‰

---

## Angular æ¡†æ¶æ¦‚è¿°

### Angular æ˜¯ä»€ä¹ˆï¼Ÿ

Angular æ˜¯ä¸€ä¸ª**å‰ç«¯æ¡†æ¶**ï¼Œç”¨äºæ„å»º**å•é¡µåº”ç”¨ï¼ˆSPA - Single Page Applicationï¼‰**ã€‚

**å•é¡µåº”ç”¨çš„ç‰¹ç‚¹**ï¼š
- æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ª HTML é¡µé¢ï¼ˆ`index.html`ï¼‰
- é€šè¿‡ JavaScript åŠ¨æ€æ›´æ–°é¡µé¢å†…å®¹
- ä¸éœ€è¦åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œåªæ›´æ–°éœ€è¦å˜åŒ–çš„éƒ¨åˆ†
- ç”¨æˆ·ä½“éªŒæµç•…ï¼Œç±»ä¼¼æ¡Œé¢åº”ç”¨

### Angular çš„æ ¸å¿ƒä¼˜åŠ¿

1. **ç»„ä»¶åŒ–å¼€å‘**ï¼šå°†é¡µé¢æ‹†åˆ†æˆå¯å¤ç”¨çš„ç»„ä»¶
2. **ä¾èµ–æ³¨å…¥**ï¼šè‡ªåŠ¨ç®¡ç†ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»
3. **æ•°æ®ç»‘å®š**ï¼šæ•°æ®å˜åŒ–è‡ªåŠ¨æ›´æ–°ç•Œé¢
4. **è·¯ç”±ç³»ç»Ÿ**ï¼šå®ç°é¡µé¢å¯¼èˆªè€Œä¸åˆ·æ–°
5. **TypeScript**ï¼šæä¾›ç±»å‹å®‰å…¨ï¼Œå‡å°‘é”™è¯¯

---

## é¡¹ç›®æ¶æ„

### æ•´ä½“ç›®å½•ç»“æ„

```
Online-Shopping-Application-Frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ components/          # ç»„ä»¶ï¼ˆUI ç»„ä»¶ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ login/           # ç™»å½•ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ user/            # ç”¨æˆ·ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ admin/           # ç®¡ç†å‘˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/            # æœåŠ¡ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ api.service.ts   # API è°ƒç”¨æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts  # è®¤è¯æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ cart.service.ts # è´­ç‰©è½¦æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹ï¼ˆTypeScript æ¥å£ï¼‰
â”‚   â”‚   â”œâ”€â”€ guards/             # è·¯ç”±å®ˆå«ï¼ˆæƒé™æ§åˆ¶ï¼‰
â”‚   â”‚   â”œâ”€â”€ app.module.ts       # ä¸»æ¨¡å—ï¼ˆé…ç½®æ‰€æœ‰ç»„ä»¶å’ŒæœåŠ¡ï¼‰
â”‚   â”‚   â””â”€â”€ app-routing.module.ts # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.html              # å”¯ä¸€çš„ HTML é¡µé¢
â”‚   â””â”€â”€ main.ts                 # åº”ç”¨å…¥å£ç‚¹
â”œâ”€â”€ package.json                # é¡¹ç›®ä¾èµ–é…ç½®
â””â”€â”€ angular.json                # Angular é¡¹ç›®é…ç½®
```

### æ¶æ„å±‚æ¬¡å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æµè§ˆå™¨                            â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              index.html (å”¯ä¸€é¡µé¢)                  â”‚ â”‚
â”‚  â”‚  <app-root></app-root>  â† Angular åº”ç”¨æŒ‚è½½ç‚¹      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              AppComponent (æ ¹ç»„ä»¶)                 â”‚ â”‚
â”‚  â”‚  - å¯¼èˆªæ                                         â”‚ â”‚
â”‚  â”‚  - è·¯ç”±å‡ºå£ <router-outlet>                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              è·¯ç”±ç³»ç»Ÿ (Router)                     â”‚ â”‚
â”‚  â”‚  - /login â†’ LoginComponent                       â”‚ â”‚
â”‚  â”‚  - /user/products â†’ ProductsComponent            â”‚ â”‚
â”‚  â”‚  - /admin/home â†’ AdminHomeComponent              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ç»„ä»¶å±‚ (Components)                   â”‚ â”‚
â”‚  â”‚  - æ˜¾ç¤º UI                                        â”‚ â”‚
â”‚  â”‚  - å¤„ç†ç”¨æˆ·äº¤äº’                                   â”‚ â”‚
â”‚  â”‚  - è°ƒç”¨æœåŠ¡è·å–æ•°æ®                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              æœåŠ¡å±‚ (Services)                     â”‚ â”‚
â”‚  â”‚  - ApiService: HTTP è¯·æ±‚                          â”‚ â”‚
â”‚  â”‚  - AuthService: è®¤è¯é€»è¾‘                          â”‚ â”‚
â”‚  â”‚  - CartService: è´­ç‰©è½¦é€šçŸ¥                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            HttpClient (Angular HTTP å®¢æˆ·ç«¯)        â”‚ â”‚
â”‚  â”‚  - å‘é€ HTTP è¯·æ±‚åˆ°åç«¯                           â”‚ â”‚
â”‚  â”‚  - æ¥æ”¶ JSON å“åº”                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              LocalStorage (æµè§ˆå™¨å­˜å‚¨)             â”‚ â”‚
â”‚  â”‚  - å­˜å‚¨ JWT Token                                â”‚ â”‚
â”‚  â”‚  - å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ (userId, role, email)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
         HTTP Request (JSON)
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åç«¯ API (http://localhost:8080)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒæ¦‚å¿µè¯¦è§£

### 1. ç»„ä»¶ï¼ˆComponentï¼‰

**ç»„ä»¶æ˜¯ Angular åº”ç”¨çš„åŸºæœ¬æ„å»ºå—**ï¼Œæ¯ä¸ªç»„ä»¶åŒ…å«ä¸‰éƒ¨åˆ†ï¼š

#### 1.1 ç»„ä»¶ç±»ï¼ˆTypeScript æ–‡ä»¶ï¼‰

```typescript
// products.component.ts
import { Component, OnInit } from '@angular/core';
import { ApiService } from '../../../services/api.service';
import { ProductDTO } from '../../../models/product.model';

@Component({
  selector: 'app-products',           // ç»„ä»¶é€‰æ‹©å™¨ï¼ˆHTML æ ‡ç­¾åï¼‰
  templateUrl: './products.component.html',  // HTML æ¨¡æ¿
  styleUrls: ['./products.component.css']     // CSS æ ·å¼
})
export class ProductsComponent implements OnInit {
  // ç»„ä»¶æ•°æ®ï¼ˆçŠ¶æ€ï¼‰
  products: ProductDTO[] = [];
  
  // æ„é€ å‡½æ•°ï¼šä¾èµ–æ³¨å…¥
  constructor(private apiService: ApiService) {}
  
  // ç”Ÿå‘½å‘¨æœŸé’©å­ï¼šç»„ä»¶åˆå§‹åŒ–æ—¶æ‰§è¡Œ
  ngOnInit(): void {
    this.loadProducts();
  }
  
  // ç»„ä»¶æ–¹æ³•
  loadProducts(): void {
    this.apiService.getAllProducts().subscribe({
      next: (products) => {
        this.products = products;  // æ›´æ–°ç»„ä»¶æ•°æ®
      },
      error: (error) => {
        console.error('Error:', error);
      }
    });
  }
}
```

**å…³é”®ç‚¹**ï¼š
- `@Component` è£…é¥°å™¨ï¼šå‘Šè¯‰ Angular è¿™æ˜¯ä¸€ä¸ªç»„ä»¶
- `selector`ï¼šåœ¨ HTML ä¸­ä½¿ç”¨ `<app-products></app-products>` æ¥æ˜¾ç¤ºè¿™ä¸ªç»„ä»¶
- `products`ï¼šç»„ä»¶çš„æ•°æ®ï¼Œç»‘å®šåˆ°æ¨¡æ¿ä¸­
- `constructor`ï¼šé€šè¿‡ä¾èµ–æ³¨å…¥è·å–æœåŠ¡
- `ngOnInit`ï¼šç»„ä»¶åˆå§‹åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨

#### 1.2 ç»„ä»¶æ¨¡æ¿ï¼ˆHTML æ–‡ä»¶ï¼‰

```html
<!-- products.component.html -->
<div>
  <h2>Products</h2>
  
  <!-- æ•°æ®ç»‘å®šï¼šæ˜¾ç¤º products æ•°ç»„ -->
  <table>
    <tr *ngFor="let product of products">
      <td>{{ product.name }}</td>
      <td>${{ product.price }}</td>
      <td>
        <!-- äº‹ä»¶ç»‘å®šï¼šç‚¹å‡»æŒ‰é’®è°ƒç”¨æ–¹æ³• -->
        <button (click)="addToCart(product)">Add to Cart</button>
      </td>
    </tr>
  </table>
</div>
```

**å…³é”®ç‚¹**ï¼š
- `{{ product.name }}`ï¼š**æ’å€¼ç»‘å®š**ï¼Œæ˜¾ç¤ºæ•°æ®
- `*ngFor`ï¼š**ç»“æ„æŒ‡ä»¤**ï¼Œå¾ªç¯æ˜¾ç¤ºæ•°ç»„
- `(click)`ï¼š**äº‹ä»¶ç»‘å®š**ï¼Œç›‘å¬ç‚¹å‡»äº‹ä»¶

#### 1.3 ç»„ä»¶æ ·å¼ï¼ˆCSS æ–‡ä»¶ï¼‰

```css
/* products.component.css */
table {
  width: 100%;
  border-collapse: collapse;
}

button {
  background-color: blue;
  color: white;
}
```

### 2. æœåŠ¡ï¼ˆServiceï¼‰

**æœåŠ¡ç”¨äºå°è£…ä¸šåŠ¡é€»è¾‘å’Œå…±äº«æ•°æ®**ï¼Œé€šå¸¸ç”¨äºï¼š
- è°ƒç”¨åç«¯ API
- ç®¡ç†åº”ç”¨çŠ¶æ€
- å¤„ç†ä¸šåŠ¡é€»è¾‘

#### 2.1 ApiService ç¤ºä¾‹

```typescript
// api.service.ts
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { Observable } from 'rxjs';
import { ProductDTO } from '../models/product.model';

const API_URL = 'http://localhost:8080';

@Injectable({
  providedIn: 'root'  // å•ä¾‹æœåŠ¡ï¼Œæ•´ä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªå®ä¾‹
})
export class ApiService {
  private token: string | null = null;

  // ä¾èµ–æ³¨å…¥ï¼šAngular è‡ªåŠ¨æä¾› HttpClient
  constructor(private http: HttpClient) {
    this.token = localStorage.getItem('token');
  }

  // è·å–æ‰€æœ‰å•†å“
  getAllProducts(): Observable<ProductDTO[]> {
    return this.http.get<ProductDTO[]>(
      `${API_URL}/products/all`,
      { headers: this.getHeaders() }
    );
  }

  // æ„å»ºè¯·æ±‚å¤´ï¼ˆåŒ…å« JWT Tokenï¼‰
  private getHeaders(): HttpHeaders {
    let headers = new HttpHeaders({
      'Content-Type': 'application/json'
    });
    if (this.token) {
      headers = headers.set('Authorization', `Bearer ${this.token}`);
    }
    return headers;
  }
}
```

**å…³é”®ç‚¹**ï¼š
- `@Injectable`ï¼šæ ‡è®°ä¸ºå¯æ³¨å…¥çš„æœåŠ¡
- `providedIn: 'root'`ï¼šå•ä¾‹æ¨¡å¼ï¼Œæ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå®ä¾‹
- `Observable`ï¼šå¼‚æ­¥æ•°æ®æµï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚
- `HttpClient`ï¼šAngular çš„ HTTP å®¢æˆ·ç«¯ï¼Œç”¨äºå‘é€è¯·æ±‚

### 3. æ¨¡å—ï¼ˆModuleï¼‰

**æ¨¡å—ç”¨äºç»„ç»‡å’Œç®¡ç†ç»„ä»¶ã€æœåŠ¡ã€æŒ‡ä»¤ç­‰**ã€‚

```typescript
// app.module.ts
import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { HttpClientModule } from '@angular/common/http';
import { AppComponent } from './app.component';
import { ProductsComponent } from './components/user/products/products.component';
import { ApiService } from './services/api.service';

@NgModule({
  declarations: [
    AppComponent,        // å£°æ˜ç»„ä»¶
    ProductsComponent
  ],
  imports: [
    BrowserModule,      // æµè§ˆå™¨æ¨¡å—ï¼ˆå¿…éœ€ï¼‰
    HttpClientModule    // HTTP å®¢æˆ·ç«¯æ¨¡å—
  ],
  providers: [],        // æœåŠ¡æä¾›è€…ï¼ˆå¦‚æœæœåŠ¡ä¸åœ¨æ ¹çº§åˆ«æä¾›ï¼‰
  bootstrap: [AppComponent]  // å¯åŠ¨ç»„ä»¶ï¼ˆåº”ç”¨å…¥å£ï¼‰
})
export class AppModule { }
```

**å…³é”®ç‚¹**ï¼š
- `declarations`ï¼šå£°æ˜å±äºè¿™ä¸ªæ¨¡å—çš„ç»„ä»¶
- `imports`ï¼šå¯¼å…¥å…¶ä»–æ¨¡å—ï¼ˆå¦‚ HttpClientModuleï¼‰
- `bootstrap`ï¼šæŒ‡å®šåº”ç”¨çš„æ ¹ç»„ä»¶

---

## æ•°æ®æµè½¬æœºåˆ¶

### 1. æ•°æ®ç»‘å®š

Angular æä¾›äº†å¤šç§æ•°æ®ç»‘å®šæ–¹å¼ï¼š

#### 1.1 æ’å€¼ç»‘å®šï¼ˆInterpolationï¼‰

```html
<!-- æ˜¾ç¤ºæ•°æ® -->
<p>å•†å“åç§°ï¼š{{ product.name }}</p>
<p>ä»·æ ¼ï¼š${{ product.price }}</p>
```

#### 1.2 å±æ€§ç»‘å®šï¼ˆProperty Bindingï¼‰

```html
<!-- ç»‘å®š HTML å±æ€§ -->
<img [src]="product.imageUrl" [alt]="product.name">
<button [disabled]="!isAuthenticated">Add to Cart</button>
```

#### 1.3 äº‹ä»¶ç»‘å®šï¼ˆEvent Bindingï¼‰

```html
<!-- ç›‘å¬äº‹ä»¶ -->
<button (click)="addToCart(product)">Add to Cart</button>
<input (input)="onInputChange($event)">
```

#### 1.4 åŒå‘ç»‘å®šï¼ˆTwo-Way Bindingï¼‰

```html
<!-- æ•°æ®åŒå‘åŒæ­¥ -->
<input [(ngModel)]="username">
<!-- ç­‰ä»·äº -->
<input [value]="username" (input)="username = $event.target.value">
```

### 2. æ•°æ®æµç¤ºä¾‹

```
ç”¨æˆ·ç‚¹å‡» "Add to Cart" æŒ‰é’®
    â†“
è§¦å‘ (click)="addToCart(product)" äº‹ä»¶
    â†“
ç»„ä»¶æ–¹æ³• addToCart() æ‰§è¡Œ
    â†“
è°ƒç”¨ apiService.addToCart()
    â†“
HttpClient å‘é€ HTTP POST è¯·æ±‚
    â†“
åç«¯å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”
    â†“
Observable çš„ subscribe() æ¥æ”¶å“åº”
    â†“
æ›´æ–°ç»„ä»¶æ•°æ® this.products
    â†“
Angular æ£€æµ‹åˆ°æ•°æ®å˜åŒ–
    â†“
è‡ªåŠ¨æ›´æ–° DOMï¼ˆé¡µé¢æ˜¾ç¤ºï¼‰
```

---

## ä¸åç«¯é€šä¿¡

### 1. HTTP è¯·æ±‚æµç¨‹

#### å®Œæ•´ç¤ºä¾‹ï¼šè·å–å•†å“åˆ—è¡¨

```typescript
// 1. ç»„ä»¶è°ƒç”¨æœåŠ¡
// products.component.ts
loadProducts(): void {
  this.apiService.getAllProducts().subscribe({
    next: (products) => {
      this.products = products;  // æˆåŠŸï¼šæ›´æ–°æ•°æ®
    },
    error: (error) => {
      console.error('Error:', error);  // å¤±è´¥ï¼šå¤„ç†é”™è¯¯
    }
  });
}

// 2. æœåŠ¡å‘é€ HTTP è¯·æ±‚
// api.service.ts
getAllProducts(): Observable<ProductDTO[]> {
  return this.http.get<ProductDTO[]>(
    `${API_URL}/products/all`,
    { headers: this.getHeaders() }
  );
}

// å®é™…å‘é€çš„ HTTP è¯·æ±‚ï¼š
// GET http://localhost:8080/products/all
// Headers:
//   Content-Type: application/json
//   Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...
```

### 2. Observable å’Œ RxJS

**Observable æ˜¯å¼‚æ­¥æ•°æ®æµ**ï¼Œç±»ä¼¼äº Promiseï¼Œä½†æ›´å¼ºå¤§ã€‚

```typescript
// Observable çš„åŸºæœ¬ä½¿ç”¨
this.apiService.getAllProducts().subscribe({
  next: (data) => {
    // æˆåŠŸæ—¶æ‰§è¡Œ
    console.log('Data:', data);
  },
  error: (error) => {
    // å¤±è´¥æ—¶æ‰§è¡Œ
    console.error('Error:', error);
  },
  complete: () => {
    // å®Œæˆæ—¶æ‰§è¡Œï¼ˆå¯é€‰ï¼‰
    console.log('Request completed');
  }
});
```

**å…³é”®ç‚¹**ï¼š
- `subscribe()`ï¼šè®¢é˜… Observableï¼Œå¼€å§‹æ¥æ”¶æ•°æ®
- `next`ï¼šæ¥æ”¶åˆ°æ•°æ®æ—¶æ‰§è¡Œ
- `error`ï¼šå‘ç”Ÿé”™è¯¯æ—¶æ‰§è¡Œ
- `complete`ï¼šæ•°æ®æµå®Œæˆæ—¶æ‰§è¡Œ

### 3. è¯·æ±‚æ‹¦æˆªå’Œé”™è¯¯å¤„ç†

```typescript
// api.service.ts
getAllProducts(): Observable<ProductDTO[]> {
  return this.http.get<ProductDTO[]>(
    `${API_URL}/products/all`,
    { headers: this.getHeaders() }
  ).pipe(
    catchError((error) => {
      // ç»Ÿä¸€é”™è¯¯å¤„ç†
      if (error.status === 401) {
        // Token è¿‡æœŸï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
        this.router.navigate(['/login']);
      }
      return throwError(error);
    })
  );
}
```

---

## çŠ¶æ€ç®¡ç†

### 1. ç»„ä»¶çŠ¶æ€

æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ï¼š

```typescript
export class ProductsComponent {
  products: ProductDTO[] = [];  // ç»„ä»¶çŠ¶æ€
  isLoading: boolean = false;    // åŠ è½½çŠ¶æ€
  
  loadProducts(): void {
    this.isLoading = true;  // æ›´æ–°çŠ¶æ€
    this.apiService.getAllProducts().subscribe({
      next: (products) => {
        this.products = products;  // æ›´æ–°çŠ¶æ€
        this.isLoading = false;   // æ›´æ–°çŠ¶æ€
      }
    });
  }
}
```

### 2. æœåŠ¡çŠ¶æ€ï¼ˆå…±äº«çŠ¶æ€ï¼‰

æœåŠ¡å¯ä»¥å­˜å‚¨å…±äº«çŠ¶æ€ï¼š

```typescript
// cart.service.ts
@Injectable({ providedIn: 'root' })
export class CartService {
  private cartUpdated = new Subject<void>();
  cartUpdated$ = this.cartUpdated.asObservable();

  notifyUpdate(): void {
    this.cartUpdated.next();  // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…
  }
}

// ç»„ä»¶è®¢é˜…çŠ¶æ€å˜åŒ–
export class ShoppingCartComponent {
  constructor(private cartService: CartService) {
    // è®¢é˜…è´­ç‰©è½¦æ›´æ–°äº‹ä»¶
    this.cartService.cartUpdated$.subscribe(() => {
      this.loadCart();  // é‡æ–°åŠ è½½è´­ç‰©è½¦
    });
  }
}
```

### 3. LocalStorageï¼ˆæŒä¹…åŒ–çŠ¶æ€ï¼‰

```typescript
// å­˜å‚¨æ•°æ®
localStorage.setItem('token', 'eyJhbGciOiJIUzI1NiJ9...');
localStorage.setItem('userId', '1');

// è¯»å–æ•°æ®
const token = localStorage.getItem('token');
const userId = localStorage.getItem('userId');

// åˆ é™¤æ•°æ®
localStorage.removeItem('token');
```

---

## è·¯ç”±ç³»ç»Ÿ

### 1. è·¯ç”±é…ç½®

```typescript
// app-routing.module.ts
const routes: Routes = [
  { path: '', redirectTo: '/login', pathMatch: 'full' },
  { path: 'login', component: LoginComponent },
  { 
    path: 'user/products', 
    component: ProductsComponent,
    canActivate: [AuthGuard]  // è·¯ç”±å®ˆå«ï¼šéœ€è¦ç™»å½•
  },
  {
    path: 'admin/home',
    component: AdminHomeComponent,
    canActivate: [AuthGuard, AdminGuard]  // éœ€è¦ç®¡ç†å‘˜æƒé™
  }
];
```

### 2. è·¯ç”±å¯¼èˆª

```typescript
// åœ¨ç»„ä»¶ä¸­å¯¼èˆª
this.router.navigate(['/user/products']);  // ç¼–ç¨‹å¼å¯¼èˆª

// åœ¨æ¨¡æ¿ä¸­å¯¼èˆª
<a routerLink="/user/products">Products</a>  // å£°æ˜å¼å¯¼èˆª
```

### 3. è·¯ç”±å®ˆå«

```typescript
// auth.guard.ts
@Injectable({ providedIn: 'root' })
export class AuthGuard implements CanActivate {
  constructor(private router: Router) {}

  canActivate(): boolean {
    if (localStorage.getItem('token')) {
      return true;  // å…è®¸è®¿é—®
    } else {
      this.router.navigate(['/login']);  // é‡å®šå‘åˆ°ç™»å½•é¡µ
      return false;  // æ‹’ç»è®¿é—®
    }
  }
}
```

---

## ä¾èµ–æ³¨å…¥

### 1. ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ

**ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰** æ˜¯ Angular çš„æ ¸å¿ƒç‰¹æ€§ï¼Œç”¨äºè‡ªåŠ¨ç®¡ç†ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚

**ä¼ ç»Ÿæ–¹å¼ï¼ˆä¸æ¨èï¼‰**ï¼š
```typescript
// æ‰‹åŠ¨åˆ›å»ºä¾èµ–
const httpClient = new HttpClient();
const apiService = new ApiService(httpClient);
const component = new ProductsComponent(apiService);
```

**ä¾èµ–æ³¨å…¥æ–¹å¼ï¼ˆæ¨èï¼‰**ï¼š
```typescript
// Angular è‡ªåŠ¨æ³¨å…¥
export class ProductsComponent {
  constructor(private apiService: ApiService) {
    // Angular è‡ªåŠ¨åˆ›å»º ApiService å®ä¾‹å¹¶æ³¨å…¥
  }
}
```

### 2. ä¾èµ–æ³¨å…¥çš„å·¥ä½œåŸç†

```
1. ç»„ä»¶å£°æ˜éœ€è¦ ApiService
   constructor(private apiService: ApiService)
    â†“
2. Angular æŸ¥æ‰¾ ApiService çš„æä¾›è€…
   @Injectable({ providedIn: 'root' })
    â†“
3. Angular åˆ›å»ºæˆ–è·å– ApiService å®ä¾‹
   ï¼ˆå•ä¾‹æ¨¡å¼ï¼šæ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼‰
    â†“
4. Angular å°†å®ä¾‹æ³¨å…¥åˆ°ç»„ä»¶
   this.apiService å¯ä»¥ä½¿ç”¨äº†
```

### 3. ä¾èµ–æ³¨å…¥çš„ä¼˜åŠ¿

- **è§£è€¦**ï¼šç»„ä»¶ä¸éœ€è¦çŸ¥é“å¦‚ä½•åˆ›å»ºæœåŠ¡
- **å¯æµ‹è¯•**ï¼šå¯ä»¥è½»æ¾æ›¿æ¢ä¸ºæ¨¡æ‹Ÿå¯¹è±¡
- **å•ä¾‹**ï¼šæœåŠ¡å®ä¾‹åœ¨æ•´ä¸ªåº”ç”¨ä¸­å…±äº«
- **è‡ªåŠ¨ç®¡ç†**ï¼šAngular è‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»

---

## å®Œæ•´ç¤ºä¾‹æµç¨‹

### åœºæ™¯ï¼šç”¨æˆ·æŸ¥çœ‹å•†å“åˆ—è¡¨å¹¶æ·»åŠ åˆ°è´­ç‰©è½¦

#### æ­¥éª¤ 1ï¼šåº”ç”¨å¯åŠ¨

```
1. æµè§ˆå™¨åŠ è½½ index.html
2. æ‰§è¡Œ main.ts
3. å¯åŠ¨ Angular åº”ç”¨
4. åŠ è½½ AppModule
5. æ¸²æŸ“ AppComponentï¼ˆæ ¹ç»„ä»¶ï¼‰
```

#### æ­¥éª¤ 2ï¼šè·¯ç”±å¯¼èˆª

```
ç”¨æˆ·è®¿é—® /user/products
    â†“
è·¯ç”±ç³»ç»ŸåŒ¹é…è·¯ç”±é…ç½®
    â†“
AuthGuard æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•
    â†“
å¦‚æœå·²ç™»å½•ï¼ŒåŠ è½½ ProductsComponent
```

#### æ­¥éª¤ 3ï¼šç»„ä»¶åˆå§‹åŒ–

```typescript
// products.component.ts
ngOnInit(): void {
  this.loadProducts();  // ç»„ä»¶åˆå§‹åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨
}
```

#### æ­¥éª¤ 4ï¼šåŠ è½½æ•°æ®

```typescript
loadProducts(): void {
  // 1. è°ƒç”¨æœåŠ¡
  this.apiService.getAllProducts().subscribe({
    // 2. ç­‰å¾… HTTP å“åº”
    next: (products) => {
      // 3. æ›´æ–°ç»„ä»¶æ•°æ®
      this.products = products;
      // 4. Angular è‡ªåŠ¨æ›´æ–°é¡µé¢æ˜¾ç¤º
    }
  });
}
```

#### æ­¥éª¤ 5ï¼šHTTP è¯·æ±‚

```
ApiService.getAllProducts()
    â†“
HttpClient.get('http://localhost:8080/products/all')
    â†“
æ·»åŠ è¯·æ±‚å¤´ï¼šAuthorization: Bearer {token}
    â†“
å‘é€ HTTP GET è¯·æ±‚
    â†“
ç­‰å¾…åç«¯å“åº”
```

#### æ­¥éª¤ 6ï¼šç”¨æˆ·äº¤äº’

```
ç”¨æˆ·ç‚¹å‡» "Add to Cart" æŒ‰é’®
    â†“
è§¦å‘ (click)="addToCart(product)" äº‹ä»¶
    â†“
æ‰§è¡Œ addToCart() æ–¹æ³•
    â†“
è°ƒç”¨ apiService.addToCart()
    â†“
å‘é€ HTTP POST è¯·æ±‚åˆ°åç«¯
    â†“
åç«¯å¤„ç†å¹¶è¿”å›å“åº”
    â†“
æ›´æ–°è´­ç‰©è½¦çŠ¶æ€
    â†“
é€šçŸ¥å…¶ä»–ç»„ä»¶ï¼ˆé€šè¿‡ CartServiceï¼‰
    â†“
è´­ç‰©è½¦ç»„ä»¶è‡ªåŠ¨åˆ·æ–°
```

---

## å…³é”®æŠ€æœ¯ç‚¹æ€»ç»“

### 1. ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ

```typescript
export class ProductsComponent implements OnInit, OnDestroy {
  ngOnInit(): void {
    // ç»„ä»¶åˆå§‹åŒ–æ—¶æ‰§è¡Œï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰
    // é€‚åˆåŠ è½½æ•°æ®
  }

  ngOnDestroy(): void {
    // ç»„ä»¶é”€æ¯æ—¶æ‰§è¡Œ
    // é€‚åˆæ¸…ç†èµ„æºï¼ˆå–æ¶ˆè®¢é˜…ç­‰ï¼‰
  }
}
```

### 2. å¼‚æ­¥å¤„ç†

```typescript
// ä½¿ç”¨ async/awaitï¼ˆéœ€è¦å°† Observable è½¬æ¢ä¸º Promiseï¼‰
async loadProducts() {
  try {
    const products = await this.apiService.getAllProducts().toPromise();
    this.products = products;
  } catch (error) {
    console.error('Error:', error);
  }
}

// ä½¿ç”¨ subscribeï¼ˆæ¨èï¼‰
loadProducts() {
  this.apiService.getAllProducts().subscribe({
    next: (products) => this.products = products,
    error: (error) => console.error('Error:', error)
  });
}
```

### 3. é”™è¯¯å¤„ç†

```typescript
this.apiService.getAllProducts().subscribe({
  next: (products) => {
    this.products = products;
  },
  error: (error) => {
    if (error.status === 401) {
      // æœªæˆæƒï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
      this.router.navigate(['/login']);
    } else if (error.status === 0) {
      // ç½‘ç»œé”™è¯¯
      this.snackBar.open('æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨', 'å…³é—­');
    } else {
      // å…¶ä»–é”™è¯¯
      this.snackBar.open('åŠ è½½å¤±è´¥', 'å…³é—­');
    }
  }
});
```

---

## æ€»ç»“

### Angular å‰ç«¯å·¥ä½œåŸç†æ ¸å¿ƒè¦ç‚¹ï¼š

1. **ç»„ä»¶åŒ–**ï¼šå°† UI æ‹†åˆ†æˆå¯å¤ç”¨çš„ç»„ä»¶
2. **æ•°æ®ç»‘å®š**ï¼šæ•°æ®å˜åŒ–è‡ªåŠ¨æ›´æ–°ç•Œé¢
3. **æœåŠ¡**ï¼šå°è£…ä¸šåŠ¡é€»è¾‘å’Œ API è°ƒç”¨
4. **ä¾èµ–æ³¨å…¥**ï¼šè‡ªåŠ¨ç®¡ç†ç»„ä»¶ä¾èµ–
5. **è·¯ç”±**ï¼šå®ç°å•é¡µåº”ç”¨çš„é¡µé¢å¯¼èˆª
6. **Observable**ï¼šå¤„ç†å¼‚æ­¥æ•°æ®æµ
7. **æ¨¡å—åŒ–**ï¼šç»„ç»‡å’Œç®¡ç†ä»£ç 

### æ•°æ®æµå‘ï¼š

```
ç”¨æˆ·æ“ä½œ â†’ ç»„ä»¶æ–¹æ³• â†’ æœåŠ¡æ–¹æ³• â†’ HTTP è¯·æ±‚ â†’ åç«¯ API
                                                      â†“
é¡µé¢æ›´æ–° â† æ•°æ®ç»‘å®š â† ç»„ä»¶çŠ¶æ€ â† Observable â† HTTP å“åº”
```

### å­¦ä¹ å»ºè®®ï¼š

1. ç†è§£ç»„ä»¶ã€æœåŠ¡ã€æ¨¡å—çš„åŸºæœ¬æ¦‚å¿µ
2. æŒæ¡æ•°æ®ç»‘å®šå’Œäº‹ä»¶å¤„ç†
3. å­¦ä¹ å¦‚ä½•ä½¿ç”¨ HttpClient å‘é€è¯·æ±‚
4. ç†è§£ Observable å’Œå¼‚æ­¥ç¼–ç¨‹
5. ç†Ÿæ‚‰è·¯ç”±å’Œä¾èµ–æ³¨å…¥

---

**å¸Œæœ›è¿™ä»½æ–‡æ¡£èƒ½å¸®åŠ©ä½ ç†è§£ Angular å‰ç«¯çš„å·¥ä½œåŸç†ï¼** ğŸš€

